/* PostCreator Component Styles - Mobile First */
/* 
 * Design Philosophy: Mobile-first responsive design with progressive enhancement
 * Error Prevention: Comprehensive fallbacks and defensive CSS
 */

/* CameraView Styles */
.cameraVideoFlipped {
  -webkit-transform: scaleX(-1);
  transform: scaleX(-1);
  -webkit-transition: transform 0.3s ease;
  transition: transform 0.3s ease;
}

.cameraVideoNormal {
  -webkit-transform: scaleX(1);
  transform: scaleX(1);
  -webkit-transition: transform 0.3s ease;
  transition: transform 0.3s ease;
}

/* Base video element styles */
.cameraVideo {
  width: 100%;
  height: 100%;
  object-fit: cover;
  /* Ensure smooth transitions */
  will-change: transform;
}

/* Recording duration indicator */
.recordingIndicator {
  background: rgba(0, 0, 0, 0.6);
  -webkit-backdrop-filter: blur(8px);
  backdrop-filter: blur(8px);
  border-radius: 9999px;
  padding: 8px 16px;
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Progress ring for video recording */
.progressRing {
  position: absolute;
  inset: 0;
  width: 96px; /* 24 * 4 = 96px for w-24 */
  height: 96px;
  -webkit-transform: rotate(-90deg);
  transform: rotate(-90deg);
}

.progressCircle {
  fill: none;
  stroke-width: 4;
  -webkit-transition: all 0.3s ease;
  transition: all 0.3s ease;
}

/* Recording button states */
.recordButtonBase {
  position: relative;
  width: 96px; /* 24 * 4 = 96px for w-24 */
  height: 96px;
  border-radius: 50%;
  -webkit-transition: all 0.3s ease;
  transition: all 0.3s ease;
  -webkit-transform: translateZ(0); /* Force GPU acceleration */
  transform: translateZ(0);
}

.recordButtonInner {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  -webkit-transition: all 0.3s ease;
  transition: all 0.3s ease;
}

/* Button hover effects - only on devices that support hover */
@media (min-width: 768px) and (hover: hover) {
  .recordButtonBase:not(:disabled):hover {
    -webkit-transform: scale(1.05);
    transform: scale(1.05);
  }
  
  .recordButtonBase:active {
    -webkit-transform: scale(0.95);
    transform: scale(0.95);
  }
}

/* Record button outer ring animation */
.recordButtonRing {
  position: absolute;
  inset: 0;
  width: 96px;
  height: 96px;
  border-radius: 50%;
  border-width: 4px;
  -webkit-transition: all 0.5s ease;
  transition: all 0.5s ease;
}

.recordButtonRingRecording {
  border-color: #ef4444; /* red-500 */
  -webkit-transform: scale(1.1);
  transform: scale(1.1);
  -webkit-animation: pulse 2s infinite;
  animation: pulse 2s infinite;
}

.recordButtonRingActive {
  border-color: rgba(255, 255, 255, 0.3);
}

.recordButtonRingActive:hover {
  border-color: rgba(255, 255, 255, 0.5);
}

.recordButtonRingInactive {
  border-color: rgba(107, 114, 128, 0.3); /* gray-500/30 */
}

/* Photo button styles */
.recordButtonPhoto {
  background: linear-gradient(135deg, #ffffff 0%, #e5e7eb 100%);
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
}

.recordButtonPhotoDisabled {
  background: #4b5563; /* gray-600 */
}

/* Video button styles */
.recordButtonVideo {
  background: linear-gradient(135deg, #ec4899 0%, #a855f7 100%);
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
}

.recordButtonVideoRecording {
  background: #ef4444; /* red-500 */
  box-shadow: 0 25px 50px -12px rgba(239, 68, 68, 0.5);
}

.recordButtonVideoDisabled {
  background: #4b5563; /* gray-600 */
}

/* Animation for pulsing effect */
@-webkit-keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

/* Loading spinner */
.loadingSpinner {
  -webkit-animation: spin 1s linear infinite;
  animation: spin 1s linear infinite;
  border-width: 3px;
  border-color: #ffffff;
  border-top-color: transparent;
  border-radius: 50%;
}

@-webkit-keyframes spin {
  from {
    -webkit-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  to {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes spin {
  from {
    -webkit-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  to {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

/* Mode selector styles */
.modeSelector {
  background: rgba(0, 0, 0, 0.3);
  -webkit-backdrop-filter: blur(8px);
  backdrop-filter: blur(8px);
  border-radius: 9999px;
  padding: 6px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
}

.modeButton {
  position: relative;
  padding: 10px 20px;
  border-radius: 9999px;
  font-size: 0.875rem;
  font-weight: 500;
  -webkit-transition: all 0.3s ease;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 8px;
}

.modeButtonActive {
  background: #ffffff;
  color: #000000;
  box-shadow: 0 4px 14px rgba(0, 0, 0, 0.3);
  -webkit-transform: scale(1.05);
  transform: scale(1.05);
}

.modeButtonInactive {
  color: rgba(255, 255, 255, 0.8);
}

.modeButtonInactive:hover {
  color: #ffffff;
  background: rgba(255, 255, 255, 0.1);
}

.modeButtonGlow {
  position: absolute;
  inset: 0;
  border-radius: 9999px;
  background: rgba(255, 255, 255, 0.2);
  -webkit-animation: pulse 2s infinite;
  animation: pulse 2s infinite;
}

/* Accessibility improvements */
@media (prefers-reduced-motion: reduce) {
  .cameraVideoFlipped,
  .cameraVideoNormal,
  .recordButtonBase,
  .recordButtonInner,
  .recordButtonRing,
  .modeButton,
  .progressCircle {
    -webkit-transition: none;
    transition: none;
  }
  
  .loadingSpinner,
  .recordButtonRingRecording,
  .modeButtonGlow {
    -webkit-animation: none;
    animation: none;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .recordButtonRingActive {
    border-color: #ffffff;
    border-width: 2px;
  }
  
  .modeSelector {
    background: #000000;
    border: 1px solid #ffffff;
  }
  
  .recordingIndicator {
    background: #000000;
    border: 1px solid #ffffff;
  }
}

/* Error Prevention & Cross-Browser Compatibility */
.cameraVideo,
.recordButtonBase *,
.modeSelector * {
  box-sizing: border-box;
}

/* Progressive Enhancement for Larger Screens */
@media (min-width: 768px) {
  /* Tablet optimizations */
  .recordButtonBase {
    width: 112px; /* Slightly larger on tablet */
    height: 112px;
  }
  
  .recordButtonRing {
    width: 112px;
    height: 112px;
  }
  
  .progressRing {
    width: 112px;
    height: 112px;
  }
}

@media (min-width: 1024px) {
  /* Desktop optimizations */
  .recordButtonBase {
    width: 128px; /* Even larger on desktop */
    height: 128px;
  }
  
  .recordButtonRing {
    width: 128px;
    height: 128px;
  }
  
  .progressRing {
    width: 128px;
    height: 128px;
  }
}

/* Upload progress bar styles */
.uploadProgressBar {
  height: 100%;
  background-color: rgb(59, 130, 246); /* blue-500 */
  transition: width 300ms;
}

/* Progress bar width classes - covering 0-100% in 5% increments */
.uploadProgressBar[data-progress="0"] { width: 0%; }
.uploadProgressBar[data-progress="5"] { width: 5%; }
.uploadProgressBar[data-progress="10"] { width: 10%; }
.uploadProgressBar[data-progress="15"] { width: 15%; }
.uploadProgressBar[data-progress="20"] { width: 20%; }
.uploadProgressBar[data-progress="25"] { width: 25%; }
.uploadProgressBar[data-progress="30"] { width: 30%; }
.uploadProgressBar[data-progress="35"] { width: 35%; }
.uploadProgressBar[data-progress="40"] { width: 40%; }
.uploadProgressBar[data-progress="45"] { width: 45%; }
.uploadProgressBar[data-progress="50"] { width: 50%; }
.uploadProgressBar[data-progress="55"] { width: 55%; }
.uploadProgressBar[data-progress="60"] { width: 60%; }
.uploadProgressBar[data-progress="65"] { width: 65%; }
.uploadProgressBar[data-progress="70"] { width: 70%; }
.uploadProgressBar[data-progress="75"] { width: 75%; }
.uploadProgressBar[data-progress="80"] { width: 80%; }
.uploadProgressBar[data-progress="85"] { width: 85%; }
.uploadProgressBar[data-progress="90"] { width: 90%; }
.uploadProgressBar[data-progress="95"] { width: 95%; }
.uploadProgressBar[data-progress="100"] { width: 100%; }

/* Ensure compatibility with older browsers */
@supports not (backdrop-filter: blur(8px)) {
  .modeSelector,
  .recordingIndicator {
    background: rgba(0, 0, 0, 0.8);
  }
}